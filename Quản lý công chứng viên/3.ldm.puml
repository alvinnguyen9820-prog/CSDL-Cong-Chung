@startuml ldm
!pragma layout smetana
left to right direction

entity Nguoi
entity CongChungVien
entity ChungChiHanhNghe
entity LichSuChungChi
entity ThongTinBoNhiemMienNhiem
entity ChuKySo
entity LichSuCapNhatThongtin

entity Nguoi {
  nguoiId: int <<PK>> - ID bản ghi, tự động tăng
  loaiGiayTo: string - Loại giấy tờ
  soGiayTo: string - Số CMND/Căn cước/CCCD 
  ngayCap: date - Ngày cấp
  noiCap: string - Nơi cấp
  hoVaTen: string - Họ và tên công chứng viên
  ngaySinh: datetime - Ngày tháng năm sinh
  gioiTinh: int - Nam là 1, Nữ là 2
  quocTich: string - Quốc tịch
  danToc: string - Dân tộc
  tinhThanhPho: int - Mã tỉnh thành phố từ 1/7
  phuongXa: int - Mã phường xã từ 1/7
  diaChi: string - Địa chỉ
  tinhThanhPhoCu: int - Mã tỉnh thành phố trước 1/7
  phuongXaCu: int - Mã phường xã cũ trước 1/7
  createdAt: datetime - Ngày tạo
  updatedAt: datetime      - Ngày cập nhật
}

entity CongChungVien {
  *congChungVienId: int <<PK>> - Id công chứng viên, tự động tăng
  nguoiId: int <<Fk>> - ID tham chiếu tới bảng người
  anhCongChungVien: string - Link ảnh công chứng viên
  soDienThoai: string - Số điện thoại của công chứng viên
  email: string - Email công chứng viên
  trangThai: string - Danh sách trạng thái
  soThe: string - Số thẻ công chứng viên
  toChucCongChungId: int - Tổ chức công chứng hiện tại
  tenToChucCongChung: string - Tên tổ chức công chứng hiện tại
  createdAt: datetime - Ngày tạo
  updatedAt: datetime - Ngày cập nhật

}

entity ChungChiHanhNghe {
  *chungChiId: int <<PK>> - UUID
  congChungVienId: int <<Fk>> - ID công chứng viên
  loaiChungChi: string - Loại chứng chỉ
  soChungChi: string - Số chứng chỉ
  ngayCap: date - Ngày cấp
  ngayHieuLuc: date - Ngày hiệu lực
  ngayHetHan: date - Ngày hết hạn
  donViCap: string - Đơn vị cấp
  trangThai: string - Trạng thái chứng chỉ
  fileDinhKem: string - File đính kèm
}

entity ChuKySo {
  *chuKySoId: int <<PK>> - Id thông tin đăng ký chữ ký số, tự động tăng
  congChungVienId: int <<Fk>> - Id công chứng viên
  maChungThu: string - Mã serial của chứng thư
  goiDangKy: string - Tên gói chứng thư
  ngayHieuLuc: date - Ngày hiệu lực
  ngayKetThuc: date - Ngày hết hạn
  nhaCungCap: string - Tên nhà cung cấp
  trangThai: string - Trạng thái phê duyệt thông tin đăng ký chữ ký số
  thoiGianGui: datetime - Thời gian gửi thông tin
  nguoiGui: string - Người gửi thông tin
  thoiGianDuyet: datetime - Thời gian duyệt
  nguoiDuyet: string - Người duyệt
  fileDinhKem: string - link file đính kèm
  createdAt: datetime - Ngày tạo/ngày đăng ký
  updatedAt: datetime      - Ngày cập nhật
}

entity LichSuCapNhatThongtin {
  *lichSuCapNhatId: int <<PK>> - Id bản ghi lịch sử cập nhật, tự động tăng
  doiTuong: string - Đối tượng cập nhật VD Chữ ký số, Công chứng viên,...
  truongThongtinCapNhat: string - Trường thông tin cập nhật
  truongThongTinId: string - Mã trường thông tin cập nhật
  thayDoi: string - Thông tin thay đổi
  createdAt: datetime - Ngày tạo
  updatedAt: datetime      - Ngày cập nhật
  createdBy: string - Người tạo
  updatedBy: string - Người cập nhật
}

@enduml
